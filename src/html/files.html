<!-- Files -->
<div class="row" data-ng-show="!files.length">
	<div class="span3">&nbsp;</div>
	<div class="span3 small">
		<b>Primary table</b>
	</div>
</div>
<div class="row-fluid" data-ng-show="files.length">
	<div class="span3 small">
		<b>Primary table</b>
	</div>
	<div class="span3 muted small">Secondary table(s)</div>
</div>
<div class="row" data-ng-show="!files.length">
	<div class="span3 small" style="padding-left:20px; margin-top:-30px">
		<span data-ng-show="!files.length"><img src="img/palladio_logo.png" width="90" align="left" style="margin-right:15px;margin-bottom:1px"><strong>Palladio</strong> is a web-based platform for the visualization of complex, multi-dimensional data. Our goal has been to open up data visualization to any researcher, by making it possible to upload and visualize data within a web browser, without any barriers. In the Palladio platform there is no need to create an account and nor do we store any data. On the visualization side, we have emphasized tools for filtering: a timeline filter allows researchers to explore data at both micro and macro temporal scales. The facet filter function provides the option to sort and filter data at various levels, which is of particular use when exploring multidimensional data sets.</span>
	</div>
	<div class="span3 small">
		<p class="small">Your primary table is the main entity you want to visualize. It could be either an object, like a person or a letter, or a more abstract concept, like a relationship. Once you have loaded your primary table, you will be able to extend fields in the primary table with additional information.</p>
		<p class="small">We recommend that your primary table include a unique key, which can be used to uniquely identify the different entities in the table.</p>
		<p><a href="http://hdlab.stanford.edu/projects/palladio/">Need help? Read our full documentation.</a></p>
	</div>
	<div class="data-loader span6">
		<div class="alert alert-warning" ng-show="parseError">{{parseError}}</div>
		<textarea ui-codemirror="{ mode : 'text',  lineNumbers : true, lineWrapping: true, onDrop : onDrop }" placeholder="Paste your data or drop a file here" ng-model="text"></textarea>
		<div class="">
			<button class="btn" ng-click="parseExtendTable()" ng-disabled="!text">Load data</button>
		</div>
		<div class="clearfix"></div>
	</div>
</div>
<div class="row-fluid" ng-show="files.length">
	<div class="span12 muted small">
		<ul class="unstyled row-fluid files-list" group every="4" watch="files.length">
			<!-- Each file -->
			<li id="file-info-{{file.id}}" data-ng-repeat="file in files" class="file-info span3">

				<!-- Table Header -->
				<div class="file-info-header">
					<input 	data-toggle="tooltip"
		                    data-original-title="Rename"
		                    type="text" class="editable span12 left" ng-class="{strong:$index==0}" ng-model="file.label" placeholder="Untitled"></input>
					<p class="tiny small" style="cursor:pointer">
						<span data-toggle="tooltip"
							  data-original-title="{{file.data.length}} Row(s)">{{file.data.length}} <i class="fa fa-bars muted"></i></span>
						<span data-toggle="tooltip"
							  data-original-title="{{file.fields.length}} Column(s)"
							  style="margin-left:8px">{{file.fields.length}} <i class="fa fa-columns muted"></i></span>
						<span data-toggle="tooltip"
							  data-original-title="{{file.fields | unique}} Unique key(s)"
							  style="margin-left:8px">{{file.fields | unique}} <i class="fa fa-tags muted"></i></span>
						<!--<span class="pull-right muted" style="margin-left:6px" ng-show="$index==0">Primary table</span>-->
					</p>
				</div>

				<!-- Fields -->
				<ul class="unstyled fields-row">
					<!-- Each field -->
					<li class="field"
						data-ng-repeat="field in file.fields"
						data-ng-class="{ 
							selected : field.key == selectedFieldMetadata.key,
							confirmed : field.confirmed,
							unique: field.uniqueKey,
							special : field.special.length,
							error : field.errors.length,
							hidden : field.delete
						}">

						<div class="row-fluid">

							<div class="span1">
								<div data-ng-show="!isLinked(field)">
									<a
										data-ng-show="!field.delete"
										data-toggle="tooltip"
										data-ng-click="toggleDelete(field)"
								  		data-original-title="Disable">
								  		<i class="fa fa-eye muted"></i>
								  	</a>

								  	<a
								  		data-ng-show="field.delete"
										data-toggle="tooltip"
										data-ng-click="toggleDelete(field)"
								  		data-original-title="Enable">
								  		<i class="fa fa-eye-slash muted"></i>
								  	</a>
								</div>
								<div data-ng-show="isLinked(field)">&nbsp;</div>
							</div> <!-- end of span1 -->
							
							<div class="span11 field-content">

								<span class="field-description" data-ng-click="setSelected(field,file)">
									{{field.description}}<span class="edit"><i class="fa fa-pencil"></i></span>
								</span>

								<p class="type" data-ng-class="{ error : field.errors.length }" data-ng-show="!field.delete">
									<span ng-show="field.type" data-ng-class="{ error : field.errors.length }">
										<span class="">{{types[field.type]}}</span>
										<span ng-show="field.errors.length" class="super error"> {{field.errors.length}} errors!</span>
										<span class="" ng-show="!field.type">No type assigned</span>
										<span class="cardinality"> &middot; {{field.cardinality}}</span>
			
									</span>

								</p>

								<div data-ng-show="!field.delete">

									<!-- When augmented -->
									<span class="augment-notification"
										data-toggle="tooltip"
										data-html="true"
										data-original-title="<b>{{hasLinks(field).metadata.matches}}</b> matches in <b>{{hasLinks(field).lookup.file.label}}</b> (via {{hasLinks(field).lookup.field.description}})"
										data-ng-show="hasLinks(field).lookup.file"
										data-ng-style="{ 'background-color': hasLinks(field).metadata.background }"
										data-ng-mouseout="highlightLink(hasLinks(null))"
										data-ng-mouseover="highlightLink(hasLinks(field),file)"
										data-ng-click="setSelected(field,file)">
											<!--<i class="fa fa-link" ng-show="hasLinks(field).metadata.matches == field.cardinality"></i> 
											<i class="fa fa-unlink" ng-show="hasLinks(field).metadata.matches < field.cardinality"></i> -->
											{{hasLinks(field).metadata.matches}} {{hasLinks(field).lookup.file.label}}
										</span>

									<!-- When can be augmented -->
									<span class="augment-notification initial"
										data-toggle="tooltip"
										data-original-title="Extend this dimension"
										data-ng-click="showNewTableAndSelect(field,file)"
										data-ng-show="!hasLinks(field).lookup.file && field.unassignedSpecialChars.length === 0 && !field.errors.length">Extend</span>

									<!-- When special chars -->
									<span class="augment-notification specials"
										data-ng-click="setSelected(field,file)"
										data-ng-class="{confirmed:field.confirmed}"
										data-toggle="tooltip"
										data-original-title="This dimension contains special characters, please review"
										data-ng-show="field.unassignedSpecialChars.length > 0 && !hasLinks(field).lookup.file && !field.errors.length">Review</span>

									<!-- When errors -->
									<span class="augment-notification plus"
										data-ng-click="setSelected(field,file)"
										data-toggle="tooltip"
										data-original-title="This dimension contains data type errors, please review"
										data-ng-show="field.errors.length && !hasLinks(field).lookup.file"><i class="fa fa-exclamation-circle error"></i></span>

									</div>

							</div> <!-- end of span11 -->

						
						</div> <!-- end of row -->			

					</li> <!-- end of field -->

				</ul>

				<div class="with-border">
					<a class="pull-right danger small tiny delete"
						data-toggle="tooltip"
						data-original-title="Delete this table"
						data-ng-click="deleteFile(file.uniqueId)"><i class="fa fa-trash-o"></i></a>
					<div class="clearfix"></div>
				</div>
			</li>

			<div class="span3 infos" ng-show="files.length>=1">
				<p class="muted small">You can add additional tables by extending fields in your existing tables. For example, if your primary table is a list of letters, each letter may have an author. You can extend the author field and upload a new file with additional bibliographic information about the people who appear as authors in your letter table.</p>
				<p class="muted small">You can also extend secondary tables. For example, your table with bibliographic information may include a birth place, and you may want to extend this field with using a third table with additional information about locations, such as latitude and longitude coordinates.</p>
				<p class="muted small">These secondary tables must have a column with unique values that match the values in the field you are trying to extend.</p>
			</div>

		</ul>
	</div>
</div>

<div class="row-fluid" >



	
</div>

	


<!--<a href="#/link" class="btn pull-right">Continue</a>-->


